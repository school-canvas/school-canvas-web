<div class="forgot-password-wrapper">
  <!-- Background decorations -->
  <div class="background-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>

  <div class="forgot-password-container">
    <!-- Back to Login Button -->
    <button mat-icon-button class="back-button" routerLink="/auth/login" matTooltip="Back to Login">
      <mat-icon>arrow_back</mat-icon>
    </button>

    <mat-card class="forgot-password-card">
      <!-- Logo Section -->
      <div class="logo-section">
        <mat-icon class="main-icon">lock_reset</mat-icon>
        <h1 class="app-title">Forgot Password?</h1>
        <p class="welcome-text" *ngIf="!emailSent">
          No worries! Enter your email and we'll send you reset instructions
        </p>
        <p class="welcome-text success-text" *ngIf="emailSent">
          <mat-icon>check_circle</mat-icon>
          Email sent successfully!
        </p>
      </div>
      
      <mat-card-content>
        <!-- Email Sent Success Message -->
        <div *ngIf="emailSent" class="success-message">
          <mat-icon class="success-icon">email</mat-icon>
          <h3>Check Your Email</h3>
          <p>We've sent a password reset link to:</p>
          <p class="email-display">{{ forgotPasswordForm.value.email }}</p>
          <p class="info-text">
            Click the link in the email to reset your password. 
            The link will expire in 24 hours.
          </p>
          <div class="success-actions">
            <button mat-stroked-button (click)="resendEmail()" [disabled]="isLoading">
              <mat-icon>refresh</mat-icon>
              Resend Email
            </button>
            <button mat-raised-button color="primary" (click)="backToLogin()">
              <mat-icon>login</mat-icon>
              Back to Login
            </button>
          </div>
        </div>

        <!-- Email Input Form -->
        <form *ngIf="!emailSent" [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
          <!-- Email Field -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email Address</mat-label>
            <input 
              matInput 
              formControlName="email" 
              type="email"
              placeholder="Enter your registered email"
              autocomplete="email">
            <mat-icon matPrefix>email</mat-icon>
            <mat-error *ngIf="forgotPasswordForm.get('email')?.hasError('required')">
              Email is required
            </mat-error>
            <mat-error *ngIf="forgotPasswordForm.get('email')?.hasError('email')">
              Please enter a valid email address
            </mat-error>
          </mat-form-field>
          
          <!-- Action Buttons -->
          <div class="form-actions">
            <button 
              type="button" 
              mat-stroked-button 
              class="cancel-button"
              routerLink="/auth/login"
              [disabled]="isLoading">
              <mat-icon>arrow_back</mat-icon>
              Back to Login
            </button>
            <button 
              type="submit" 
              mat-raised-button 
              color="primary" 
              class="submit-button"
              [disabled]="forgotPasswordForm.invalid || isLoading">
              <mat-spinner diameter="20" *ngIf="isLoading"></mat-spinner>
              <mat-icon *ngIf="!isLoading">send</mat-icon>
              <span *ngIf="!isLoading">Send Reset Link</span>
            </button>
          </div>
        </form>
      </mat-card-content>
      
      <!-- Loading Bar -->
      <mat-card-footer *ngIf="isLoading" class="loading-footer">
        <mat-progress-bar mode="indeterminate" color="accent"></mat-progress-bar>
      </mat-card-footer>
    </mat-card>

    <!-- Info Section -->
    <div class="info-section" *ngIf="!emailSent">
      <mat-icon class="info-icon">info</mat-icon>
      <p class="info-text">
        <strong>Remember your password?</strong> 
        <a routerLink="/auth/login">Sign in here</a>
      </p>
    </div>
  </div>
  
  <!-- Auth Footer -->
  <app-auth-footer></app-auth-footer>
</div>
