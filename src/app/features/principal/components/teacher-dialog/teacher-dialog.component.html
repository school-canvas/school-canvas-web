<h2 mat-dialog-title>
  <mat-icon>{{ isEditMode ? 'edit' : 'person_add' }}</mat-icon>
  {{ isEditMode ? 'Edit Teacher' : 'Add New Teacher' }}
</h2>

<mat-dialog-content>
  <form [formGroup]="teacherForm" class="teacher-form">
    <!-- Basic Information -->
    <div class="section">
      <h3 class="section-title">Basic Information</h3>
      <div class="form-grid">
        <mat-form-field appearance="outline">
          <mat-label>User ID</mat-label>
          <input matInput formControlName="userId" placeholder="Enter user ID" required>
          <mat-icon matPrefix>badge</mat-icon>
          <mat-error *ngIf="teacherForm.get('userId')?.hasError('required')">
            User ID is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Employee ID</mat-label>
          <input matInput formControlName="employeeId" placeholder="EMP001" required>
          <mat-icon matPrefix>tag</mat-icon>
          <mat-error *ngIf="teacherForm.get('employeeId')?.hasError('required')">
            Employee ID is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>First Name</mat-label>
          <input matInput formControlName="firstName" placeholder="Enter first name" required>
          <mat-icon matPrefix>person</mat-icon>
          <mat-error *ngIf="teacherForm.get('firstName')?.hasError('required')">
            First name is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Last Name</mat-label>
          <input matInput formControlName="lastName" placeholder="Enter last name" required>
          <mat-icon matPrefix>person</mat-icon>
          <mat-error *ngIf="teacherForm.get('lastName')?.hasError('required')">
            Last name is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
          <input matInput type="email" formControlName="email" placeholder="teacher@example.com" required>
          <mat-icon matPrefix>email</mat-icon>
          <mat-error *ngIf="teacherForm.get('email')?.hasError('required')">
            Email is required
          </mat-error>
          <mat-error *ngIf="teacherForm.get('email')?.hasError('email')">
            Invalid email format
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Phone Number</mat-label>
          <input matInput formControlName="phoneNumber" placeholder="(123) 456-7890">
          <mat-icon matPrefix>phone</mat-icon>
        </mat-form-field>
      </div>
    </div>

    <!-- Professional Information -->
    <div class="section">
      <h3 class="section-title">Professional Information</h3>
      <div class="form-grid">
        <mat-form-field appearance="outline">
          <mat-label>Department</mat-label>
          <mat-select formControlName="department">
            <mat-option *ngFor="let dept of departments" [value]="dept">
              {{ dept }}
            </mat-option>
          </mat-select>
          <mat-icon matPrefix>business</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Designation</mat-label>
          <mat-select formControlName="designation">
            <mat-option *ngFor="let des of designations" [value]="des">
              {{ des }}
            </mat-option>
          </mat-select>
          <mat-icon matPrefix>work</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Qualification</mat-label>
          <input matInput formControlName="qualification" placeholder="M.Sc, Ph.D, etc.">
          <mat-icon matPrefix>school</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Specialization</mat-label>
          <input matInput formControlName="specialization" placeholder="Physics, Chemistry, etc.">
          <mat-icon matPrefix>star</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Experience (years)</mat-label>
          <input matInput type="number" formControlName="experience" placeholder="0">
          <mat-icon matPrefix>trending_up</mat-icon>
          <mat-error *ngIf="teacherForm.get('experience')?.hasError('min')">
            Experience must be 0 or greater
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Joining Date</mat-label>
          <input matInput [matDatepicker]="joiningPicker" formControlName="joiningDate">
          <mat-icon matPrefix>event</mat-icon>
          <mat-datepicker-toggle matSuffix [for]="joiningPicker"></mat-datepicker-toggle>
          <mat-datepicker #joiningPicker></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline" *ngIf="isEditMode">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status" required>
            <mat-option *ngFor="let status of statusOptions" [value]="status">
              {{ status }}
            </mat-option>
          </mat-select>
          <mat-icon matPrefix>info</mat-icon>
        </mat-form-field>
      </div>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()" [disabled]="loading">Cancel</button>
  <button 
    mat-raised-button 
    color="primary" 
    (click)="onSubmit()" 
    [disabled]="loading || !teacherForm.valid">
    <mat-spinner diameter="20" *ngIf="loading"></mat-spinner>
    <span *ngIf="!loading">{{ isEditMode ? 'Update' : 'Create' }} Teacher</span>
  </button>
</mat-dialog-actions>
