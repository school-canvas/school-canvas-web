<div class="teacher-dashboard">
  <!-- Page Header -->
  <app-page-header
    [title]="'Welcome back, ' + (teacherProfile?.firstName || 'Teacher')"
    [subtitle]="'Manage your classes and students'">
    <button mat-raised-button color="primary" [routerLink]="['/teacher/schedule']">
      <mat-icon>calendar_today</mat-icon>
      View Schedule
    </button>
  </app-page-header>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    <p>Loading dashboard...</p>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!loading" class="dashboard-content">
    <!-- Stats Cards -->
    <div class="stats-grid">
      <app-stats-card
        [title]="'My Classes'"
        [value]="totalClasses"
        [icon]="'class'"
        [color]="'primary'">
      </app-stats-card>

      <app-stats-card
        [title]="'Total Students'"
        [value]="totalStudents"
        [icon]="'people'"
        [color]="'success'">
      </app-stats-card>

      <app-stats-card
        [title]="'Pending Grading'"
        [value]="pendingGrading"
        [icon]="'grading'"
        [color]="pendingGrading > 10 ? 'warning' : 'success'">
      </app-stats-card>

      <app-stats-card
        [title]="'Today Attendance'"
        [value]="attendanceRate + '%'"
        [icon]="'check_circle'"
        [color]="attendanceRate >= 80 ? 'success' : 'warning'">
      </app-stats-card>
    </div>

    <!-- Main Content Grid -->
    <div class="content-grid">
      <!-- My Classes -->
      <mat-card class="section-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>class</mat-icon>
            My Classes
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <app-data-table
            *ngIf="myClasses.length > 0"
            [data]="myClasses"
            [columns]="classColumns"
            [actions]="classActions"
            [totalElements]="totalClasses"
            [pageSize]="10"
            (pageChange)="onPageChange($event)"
            (sortChange)="onSortChange($event)">
          </app-data-table>

          <app-empty-state
            *ngIf="myClasses.length === 0"
            [icon]="'class'"
            [title]="'No classes assigned'"
            [message]="'You have not been assigned to any classes yet.'">
          </app-empty-state>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" [routerLink]="['/teacher/classes']">
            View All Classes
          </button>
        </mat-card-actions>
      </mat-card>

      <!-- Recent Assessments -->
      <mat-card class="section-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>assignment</mat-icon>
            Recent Assessments
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <app-data-table
            *ngIf="recentAssessments.length > 0"
            [data]="recentAssessments"
            [columns]="assessmentColumns"
            [actions]="assessmentActions"
            [totalElements]="recentAssessments.length"
            [pageSize]="5"
            (pageChange)="onPageChange($event)"
            (sortChange)="onSortChange($event)">
          </app-data-table>

          <app-empty-state
            *ngIf="recentAssessments.length === 0"
            [icon]="'assignment'"
            [title]="'No assessments found'"
            [message]="'Create your first assessment to get started.'">
          </app-empty-state>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" [routerLink]="['/teacher/assessments']">
            View All Assessments
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <!-- Quick Actions -->
    <mat-card class="quick-actions">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>bolt</mat-icon>
          Quick Actions
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="action-buttons">
          <button mat-raised-button [routerLink]="['/teacher/attendance']">
            <mat-icon>event_available</mat-icon>
            Take Attendance
          </button>
          <button mat-raised-button [routerLink]="['/teacher/grading']">
            <mat-icon>grading</mat-icon>
            Grade Assignments
          </button>
          <button mat-raised-button [routerLink]="['/teacher/assessments/create']">
            <mat-icon>add_circle</mat-icon>
            Create Assessment
          </button>
          <button mat-raised-button [routerLink]="['/teacher/communication']">
            <mat-icon>message</mat-icon>
            Send Announcement
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
